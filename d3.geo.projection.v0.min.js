(function(){function t(t){return t?t/Math.sin(t):1}function a(t){return t>0?1:0>t?-1:0}function n(t){return t>0?Math.sqrt(t):0}function r(t,n,r){var M=Math.abs(t),u=Math.abs(n),e=.5*((e=Math.exp(u))-1/e);if(M){var i=1/Math.sin(M),o=(o=Math.cos(M)*i)*o,s=-(o+r*(e*e*i*i+1)-1),c=.5*(-s+Math.sqrt(s*s-4*(r-1)*o));return[h(Math.atan(1/Math.sqrt(c)),r)*a(t),h(Math.atan(Math.sqrt(Math.max(0,c/o-1)/r)),1-r)*a(n)]}return[0,h(Math.atan(e),1-r)*a(n)]}function h(t,a){for(var n=1,r=Math.sqrt(1-a),h=Math.sqrt(a),M=0;Math.abs(h)>U;M++){if(t%V){var u=Math.atan(r*Math.tan(t)/n);0>u&&(u+=V),t+=u+~~(t/V)*V}else t+=t;h=(n+r)/2,r=Math.sqrt(n*r),h=((n=h)-r)/2}return t/(Math.pow(2,M)*n)}function M(a,n){var r=Math.cos(n),h=t(Math.acos(r*Math.cos(a/=2)));return[2*r*Math.sin(a)*h,Math.sin(n)*h]}function u(t,a){var n=M(t,a);return[(n[0]+2*t/V)/2,(n[1]+a)/2]}function e(t,a){return[3*t/(2*V)*Math.sqrt(V*V/3-a*a),a]}function i(t,a){return[t*Math.sqrt(1-3*a*a/(V*V)),a]}function o(t,a){var n=Math.min(18,36*Math.abs(a)/V),r=Math.floor(n),h=n-r,M=X[r],u=X[Math.ceil(n)],e=M[0],i=M[1],o=u[0]-e,s=u[1]-i;return[t*(e+o*h),(a>0?V:-V)/2*(i+s*h)]}function s(t){function a(t,a){return[t*n,Math.sin(a)/n]}var n=Math.cos(t);return a.invert=function(t,a){return[t/n,Math.asin(a*n)]},a}function c(t,a){return[t*Math.cos(a),a]}function f(t,a){var n=Y(t/2,a);return n[0]*=2,n}function v(t,a){var n=Math.sqrt(8/(3*V));return[n*t*(1-Math.abs(a)/V),n*a]}function g(t,n){var r=Math.sqrt(4-3*Math.sin(Math.abs(n)));return[2/Math.sqrt(6*V)*t*r,a(n)*Math.sqrt(2*V/3)*(2-r)]}function b(t,a){var n=Math.sqrt(V*(4+V));return[2/n*t*(1+Math.sqrt(1-4*a*a/(V*V))),4/n*a]}function l(t,a){var n=(2+V/2)*Math.sin(a);a/=2;for(var r=0,h=1/0;10>r&&Math.abs(h)>U;r++){var M=Math.cos(a);a-=h=(a+Math.sin(a)*(M+2)-n)/(2*M*(1+M))}return[2/Math.sqrt(V*(4+V))*t*(1+Math.cos(a)),2*Math.sqrt(V/(4+V))*Math.sin(a)]}function q(t,a){return[t*(1+Math.cos(a))/Math.sqrt(2+V),2*a/Math.sqrt(2+V)]}function d(t,a){for(var n=(1+V/2)*Math.sin(a),r=0,h=1/0;10>r&&Math.abs(h)>U;r++)a-=h=(a+Math.sin(a)-n)/(1+Math.cos(a));return n=Math.sqrt(2+V),[t*(1+Math.cos(a))/n,2*a/n]}function m(t,a){if(Math.abs(a)!==V/2)for(var n=V/2*Math.sin(a),r=0,h=1/0;10>r&&Math.abs(h)>U;r++)a-=h=(a+Math.sin(2*a)/2-n)/(1+Math.cos(2*a));return[2*Math.SQRT2/V*t*Math.cos(a),Math.SQRT2*Math.sin(a)]}function p(t,a){if(Math.abs(a)>40.733*V/180){var n=m(t,a);return n[1]-=a>=0?.0528:-.0528,n}return c(t,a)}function k(t,a){for(var n,r=Math.sin(a)*(0>a?2.43763:2.67595),h=0;20>h&&(a-=n=(a+Math.sin(a)-r)/(1+Math.cos(a)),!(U>Math.abs(n)));h++);return[.85*t*Math.cos(a*=.5),Math.sin(a)*(0>a?1.93052:1.75859)]}function Q(t,a){var n=Math.tan(a/2),r=1-n*n,h=1+r*Math.cos(t/=2),M=Math.sin(t)*r/h,u=n/h,e=M*M,i=u*u;return[4/3*M*(3+e-3*i),4/3*u*(3+3*e-i)]}function w(t,a){var n=3+Math.sqrt(8),r=Math.sin(t/=2),h=Math.cos(t),M=Math.sqrt(Math.cos(a)/2),u=Math.cos(a/=2),e=Math.sin(a)/(u+2*h*M),i=Math.sqrt(2/(1+e*e)),o=Math.sqrt((u+(h+r)*M)/(u+(h-r)*M));return[n*(i*(o-1/o)-2*Math.log(o)),n*(i*e*(o+1/o)-2*Math.atan(e))]}function R(t){function a(a,r){var h=n+t-r,M=a*Math.cos(r)/h;return[h*Math.sin(M),n-h*Math.cos(M)]}if(!t)return c;var n=1/Math.tan(t);return a.invert=function(a,r){var h=Math.sqrt(a*a+(r=n-r)*r),M=n+t-h;return[h/Math.cos(M)*Math.atan2(a,r),M]},a}function S(t,a){var n=Math.sqrt(Math.max(0,1-Math.sin(a)));return[2/W*t*n,W*(1-n)]}function T(t,a){return[t*(1+Math.sqrt(Math.cos(a)))/2,a/(Math.cos(a/2)*Math.cos(t/6))]}function x(t,n){if(U>Math.abs(n))return[t,0];var r=Math.abs(2*n/V),h=Math.asin(r);if(U>Math.abs(t)||U>Math.abs(Math.abs(n)-V/2))return[0,a(n)*V*Math.tan(h/2)];var M=Math.cos(h),u=Math.abs(V/t-t/V)/2,e=u*u,i=M/(r+M-1),o=i*(2/r-1),s=o*o,c=s+e,f=i-s,v=e+i;return[a(t)*V*(u*f+Math.sqrt(e*f*f-c*(i*i-s)))/c,a(n)*V*(o*v-u*Math.sqrt((e+1)*c-v*v))/c]}function y(t){function a(a,h){var M=h-t,u=U>Math.abs(M)?a*n:U>Math.abs(u=V/4+h/2)||U>Math.abs(Math.abs(u)-V/2)?0:a*M/Math.log(Math.tan(u)/r);return[u,M]}var n=Math.cos(t),r=Math.tan(V/4+t/2);return a.invert=function(a,h){var M,u=h+t;return[U>Math.abs(h)?a/n:U>Math.abs(M=V/4+u/2)||U>Math.abs(Math.abs(M)-V/2)?0:a*Math.log(Math.tan(M)/r)/h,u]},a}function E(t,a){return[t*(1+Math.cos(a))/2,2*(a-Math.tan(a/2))]}function j(t,a){if(U>Math.abs(a))return[t,0];var n=Math.tan(a),r=t*Math.sin(a);return[Math.sin(r)/n,a+(1-Math.cos(r))/n]}function A(t,a){return[t,1.25*Math.log(Math.tan(V/4+.4*a))]}function z(t,n){function r(t,a){var n=U>Math.abs(Math.abs(a)-V/2)?0:e/Math.pow(M(a),u);return[n*Math.sin(u*t),e-n*Math.cos(u*t)]}var h=Math.cos(t),M=function(t){return Math.tan(V/4+t/2)},u=Math.log(h/Math.cos(n))/Math.log(M(n)/M(t)),e=h*Math.pow(M(t),u)/u;return r.invert=function(t,n){var r=e-n,h=a(u)*Math.sqrt(t*t+r*r);return[Math.atan2(t,r)/u,2*Math.atan(Math.pow(e/h,1/u))-V/2]},r}function C(t,n){function r(t,a){var n=u-a;return[n*Math.sin(M*t),u-n*Math.cos(M*t)]}var h=Math.cos(t),M=(h-Math.cos(n))/(n-t),u=h/M+t;return r.invert=function(t,n){var r=u-n;return[Math.atan2(t,r)/M,u-a(M)*Math.sqrt(t*t+r*r)]},r}function D(t,n){return r(t,a(n)*Math.log(Math.tan(.5*(Math.abs(n)+V/2))),.5)}function G(t,n){var r=V/2>Math.abs(t),h=D(r?t:-a(t)*(V-Math.abs(t)),n),M=h[0]/Math.SQRT2-h[1]/Math.SQRT2,u=h[1]/Math.SQRT2+h[0]/Math.SQRT2;if(r)return[M,u];var e=2.622057554164566,i=M>0^u>0?-1:1;return[i*M-a(u)*e,i*u-a(M)*e]}function H(t){function a(a,n){var r=Math.cos(n),h=(t-1)/(t-r*Math.cos(a));return[h*r*Math.sin(a),h*Math.sin(n)]}return a.invert=function(a,n){var r=a*a+n*n,h=Math.sqrt(r),M=(t-Math.sqrt(1-r*(t+1)/(t-1)))/((t-1)/h+h/(t-1));return[Math.atan2(a*M,h*Math.sqrt(1-M*M)),h?Math.asin(n*M/h):0]},a}function I(t,a){function n(a,n){var u=r(a,n),e=u[1],i=e*M/(t-1)+h;return[u[0]*h/i,e/i]}var r=H(t);if(!a)return r;var h=Math.cos(a),M=Math.sin(a);return n.invert=function(a,n){var u=(t-1)/(t-1-n*M);return r.invert(u*a,u*n*h)},n}function P(t){return function(a,n){if(U>Math.abs(Math.abs(n)-V/2))return[0,0>n?-2:2];var r=Math.sin(n),h=Math.pow((1+r)/(1-r),t/2),M=.5*(h+1/h)+Math.cos(a*=t);return[2*Math.sin(a)/M,(h-1/h)/M]}}function B(t){var a=0,n=$(t),r=n(a);return r.parallel=function(t){return arguments.length?n(a=t*V/180):180*(a/V)},r}function F(t){var a=0,n=V/3,r=$(t),h=r(a,n);return h.parallels=function(t){return arguments.length?r(a=t[0]*V/180,n=t[1]*V/180):[180*(a/V),180*(n/V)]},h}function J(){var t=.5,a=$(P),n=a(t);return n.spacing=function(n){return arguments.length?a(t=+n):t},n}function K(){var t=1.4,a=0,n=$(I),r=n(t,a);return r.distance=function(r){return arguments.length?n(t=+r,a):t},r.tilt=function(r){return arguments.length?n(t,a=r*V/180):180*a/V},r}function L(){var t=!1,a=$(N),n=a(t);return n.quincuncial=function(n){return arguments.length?a(t=!!n):t},n}function N(t){function a(a,n){var r=Math.cos(n),h=Math.cos(a)*r,M=Math.sin(a)*r,u=Math.sin(n);for(t?(a=Math.atan2(M,-u)-V/4,n=Math.asin(Math.max(-1,Math.min(1,h)))):(a=Math.atan2(u,h)+V/2,n=Math.asin(Math.max(-1,Math.min(1,-M))));0>a;)a+=2*V;var e=0>n,i=~~(a/(V/4));a%=V/2;var o,s=O(1&i?V/2-a:a,Math.abs(n)),h=s[0],M=s[1];switch(t&&e&&(M=-2-M),i>3&&(h=-h,M=-M),i%4){case 1:h=-h;case 2:o=h,h=-M,M=o;break;case 3:M=-M}return!t&&e&&(h=2-h),t?[(h-M)/Math.SQRT2,(h+M)/Math.SQRT2]:[h,M]}return a}function O(t,a){if(a===V/2)return[0,0];var r=Math.sin(a),h=r*r,M=h*h,u=1+M,e=1+3*M,i=1-M,o=Math.asin(1/Math.sqrt(u)),s=i+h*u*o,c=(1-r)/s,f=Math.sqrt(c),v=c*u,g=Math.sqrt(v),b=f*i;if(0===t)return[0,-(b+h*g)];var l=Math.cos(a),q=1/l,d=2*r*l,m=(-3*h+o*e)*d,p=(-s*l-(1-r)*m)/(s*s),k=.5*p/f,Q=i*k-2*h*f*d,w=h*u*p+c*e*d,R=-q*d,S=-q*w,T=-2*q*Q,x=4*t/V;if(t>.222*V||V/4>a&&t>.175*V){var y=(b+h*n(v*(1+M)-b*b))/(1+M);if(t>V/4)return[y,y];var E=y,j=.5*y,A=-1;y=.5*(j+E);do{var z=Math.sqrt(v-y*y),C=y*(T+R*z)+S*Math.asin(y/g)-x;if(!C)break;0>C?j=y:E=y,y=.5*(j+E)}while(50>++A&&Math.abs(E-j)>U)}else for(var y=U,A=0;25>A;A++){var D=y*y,z=n(v-D),G=T+R*z,C=y*G+S*Math.asin(y/g)-x,H=G+(S-R*D)/z,I=z?-C/H:0;if(y+=I,U>Math.abs(I))break}return[y,-b-h*n(v-y*y)]}var U=1e-6,V=Math.PI,W=Math.sqrt(V),X=[[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];e.invert=function(t,a){return[2/3*V*t/Math.sqrt(V*V/3-a*a),a]},i.invert=function(t,a){return[t/Math.sqrt(1-3*a*a/(V*V)),a]},c.invert=function(t,a){return[t/Math.cos(a),a]};var Y=d3.geo.azimuthalEqualArea.raw;f.invert=function(t,a){var n=Y.invert(t/2,a);return n[0]*=2,n},v.invert=function(t,a){var n=Math.sqrt(8/(3*V)),r=a/n;return[t/(n*(1-Math.abs(r)/V)),r]},g.invert=function(t,n){var r=2-Math.abs(n)/Math.sqrt(2*V/3);return[t*Math.sqrt(6*V)/(2*r),a(n)*Math.asin((4-r*r)/3)]},b.invert=function(t,a){var n=Math.sqrt(V*(4+V))/2;return[t*n/(1+Math.sqrt(Math.max(0,1-a*a*(4+V)/(4*V)))),a*n/2]},l.invert=function(t,a){var n=2*Math.sqrt(V/(4+V)),r=Math.asin(a/cy),h=Math.cos(r);return[t/(2/Math.sqrt(V*(4+V))*(1+h)),Math.asin((r+a/n*(h+2))/(2+V/2))]},q.invert=function(t,a){var n=Math.sqrt(2+V),r=a*n/2;return[n*t/(1+Math.cos(r)),r]},d.invert=function(t,a){var n=1+V/2,r=Math.sqrt(n/2);return[2*t*r/(1+Math.cos(a*=r)),Math.asin((a+Math.sin(a))/n)]},m.invert=function(t,a){var n=Math.asin(a/Math.SQRT2);return[V*t/(2*Math.SQRT2*Math.cos(n)),Math.asin((2*n+Math.sin(2*n))/V)]},p.invert=function(t,a){if(Math.abs(a)>40.733*V/180){var n=m.invert(t,a);return n[1]+=a>=0?.0528:-.0528,n}return c.invert(t,a)},k.invert=function(t,a){var n=Math.abs(n=a*(0>a?.5179951515653813:.5686373742600607))>1-U?n>0?V/2:-V/2:Math.asin(n);return[1.1764705882352942*t/Math.cos(n),Math.abs(n=((n+=n)+Math.sin(n))*(0>a?.4102345310814193:.3736990601468637))>1-U?n>0?V/2:-V/2:Math.asin(n)]},S.invert=function(t,a){var n=(n=a/W-1)*n;return[n>0?t*Math.sqrt(V/n)/2:0,Math.asin(Math.max(-1,Math.min(1,1-n)))]},T.invert=function(t,a){var r=Math.abs(t),h=Math.abs(a),M=V/Math.SQRT2,u=U,e=V/2;M>h?e*=h/M:u+=6*Math.acos(M/h);for(var i=0;25>i;i++){var o=Math.sin(e),s=n(Math.cos(e)),c=Math.sin(e/2),f=Math.cos(e/2),v=Math.sin(u/6),g=Math.cos(u/6),b=.5*u*(1+s)-r,l=e/(f*g)-h,q=s?-.25*u*o/s:0,d=.5*(1+s),m=(1+.5*e*c/f)/(f*g),p=e/f*(v/6)/(g*g),k=q*p-m*d,Q=(b*p-l*d)/k,w=(l*q-b*m)/k;if(e-=Q,u-=w,U>Math.abs(Q)&&U>Math.abs(w))break}return[0>t?-u:u,0>a?-e:e]},x.invert=function(t,n){if(U>Math.abs(n))return[t,0];if(U>Math.abs(t))return[0,V/2*Math.sin(2*Math.atan(n/V))];var r=(t/=V)*t,h=(n/=V)*n,M=r+h,u=M*M,e=-Math.abs(n)*(1+M),i=e-2*h+r,o=-2*e+1+2*h+u,s=h/o+(2*i*i*i/(o*o*o)-9*e*i/(o*o))/27,c=(e-i*i/(3*o))/o,f=2*Math.sqrt(-c/3),v=Math.acos(3*s/(c*f))/3;return[V*(M-1+Math.sqrt(1+2*(r-h)+u))/(2*t),a(n)*V*(-f*Math.cos(v+V/3)-i/(3*o))]},E.invert=function(t,a){for(var n=a/2,r=0,h=1/0;10>r&&Math.abs(h)>U;r++){var M=Math.cos(a/2);a-=h=(a-Math.tan(a/2)-n)/(1-.5/(M*M))}return[2*t/(1+Math.cos(a)),a]},j.invert=function(t,a){if(U>Math.abs(a))return[t,0];for(var n=t*t+a*a,r=a,h=0,M=1/0;10>h&&Math.abs(M)>U;h++){var u=Math.tan(r);r-=M=(a*(r*u+1)-r-.5*(r*r+n)*u)/((r-a)/u-1)}return[Math.asin(t*Math.tan(r))/Math.sin(r),r]},A.invert=function(t,a){return[t,2.5*Math.atan(Math.exp(.8*a))-.625*V]};var Z=d3.geo.projection,$=d3.geo.projectionMutator;d3.geo.aitoff=function(){return Z(M)},d3.geo.august=function(){return Z(Q)},d3.geo.bonne=function(){return B(R).parallel(45)},d3.geo.collignon=function(){return Z(S)},d3.geo.conicConformal=function(){return F(z)},d3.geo.conicEquidistant=function(){return F(C)},d3.geo.cylindricalEqualArea=function(){return B(s)},d3.geo.eckert1=function(){return Z(v)},d3.geo.eckert2=function(){return Z(g)},d3.geo.eckert3=function(){return Z(b)},d3.geo.eckert4=function(){return Z(l)},d3.geo.eckert5=function(){return Z(q)},d3.geo.eckert6=function(){return Z(d)},d3.geo.eisenlohr=function(){return Z(w)},d3.geo.gringorten=L,d3.geo.guyou=function(){return Z(D)},d3.geo.hammer=function(){return Z(f)},d3.geo.homolosine=function(){return Z(p)},d3.geo.hatano=function(){return Z(k)},d3.geo.kavrayskiy7=function(){return Z(e)},d3.geo.lagrange=J,d3.geo.larrivee=function(){return Z(T)},d3.geo.loximuthal=function(){return B(y).parallel(40)},d3.geo.miller=function(){return Z(A)},d3.geo.mollweide=function(){return Z(m)},d3.geo.nellHammer=function(){return Z(E)},d3.geo.peirceQuincuncial=function(){return Z(G).rotate([-90,-90,45])},d3.geo.polyconic=function(){return Z(j)},d3.geo.robinson=function(){return Z(o)},d3.geo.satellite=K,d3.geo.sinusoidal=function(){return Z(c)},d3.geo.vanDerGrinten=function(){return Z(x)},d3.geo.wagner6=function(){return Z(i)},d3.geo.winkel3=function(){return Z(u)}})();