(function(){d3.hexbin=function(){function u(n){var r={};return n.forEach(function(n,t){var a=f.call(u,n,t)/i,o=Math.round(a),h=c.call(u,n,t)/e-(1&o?.5:0),s=Math.round(h),g=a-o;if(3*Math.abs(g)>1){var l=h-s,v=s+(s>h?-1:1)/2,M=o+(o>a?-1:1),m=h-v,d=a-M;l*l+g*g>m*m+d*d&&(s=v+(1&o?1:-1)/2,o=M)}var x=s+"-"+o,j=r[x];j?j.push(n):(j=r[x]=[n],j.x=(s+(1&o?.5:0))*e,j.y=o*i)}),d3.values(r)}var a,e,i,o=1,h=1,c=r,f=t;return u.x=function(n){return arguments.length?(c=n,u):c},u.y=function(n){return arguments.length?(f=n,u):f},u.hexagon=function(r){var t=0,u=0;return 1>arguments.length&&(r=a),"m"+n.map(function(n){var a=Math.sin(n)*r,e=-Math.cos(n)*r,i=a-t,o=e-u;return t=a,u=e,[i,o]}).join("l")+"z"},u.mesh=function(){for(var n=[],r=u.hexagon().slice(0,4).join("l"),t=0,c=!1;h+a>t;t+=i,c=!c)for(var f=c?e/2:0;o>f;f+=e)n.push("M",f,",",t,"m",r);return n.join("")},u.size=function(n){return arguments.length?(o=+n[0],h=+n[1],u):[o,h]},u.radius=function(n){return arguments.length?(a=+n,e=2*a*Math.sin(Math.PI/3),i=1.5*a,u):a},u.radius(1)};var n=d3.range(0,2*Math.PI,Math.PI/3),r=function(n){return n[0]},t=function(n){return n[1]}})();